<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12 - Memory Game</title>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="../master.css">
    <!-- Agregamos SweetAlert CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
    <style>
        body {
            background-color: #0a192f; /* Azul oscuro */
            color: white;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        
        .memory-game {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
        }
        
        .game-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-size: 1.2em;
            color: white;
        }
        
        .game-board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .card {
            height: 80px;
            background-color: #3498db;
            border-radius: 5px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2em;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .card.hidden {
            background-color: #2c3e50;
            color: transparent;
        }
        
        .card.matched {
            background-color: #27ae60;
            cursor: default;
        }
        
        .restart-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }
        
        .restart-btn:hover {
            background-color: #c0392b;
        }

        /* Estilos originales que me proporcionaste */
        .nav {
            margin-bottom: 20px;
        }
        
        .nav a {
            color: white;
            text-decoration: none;
            font-size: 24px;
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: white;
            margin-bottom: 10px;
        }
        
        .header h2 {
            color: #ccc;
            font-weight: normal;
            margin-top: 0;
        }
    </style>
</head>
<body class="jquery">
    <nav class="nav">
        <a href="index.html">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg>
        </a>
    </nav>
    <main>
        <header class="header">
            <h1>12 - Memory Game</h1>
            <h2>Build a memory game using jQuery.</h2>
        </header>
        <section class="section">
            <div class="memory-game">
                <div class="game-header">
                    <div class="time">Time: <span>0</span>s</div>
                    <div class="moves">Moves: <span>0</span></div>
                </div>
                <div class="game-board"></div>
                <button class="restart-btn">Restart Game</button>
            </div>
        </section>
    </main>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <!-- Agregamos SweetAlert JS -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    $(document).ready(function () {
        // Emojis para las cartas (6 pares)
        var emojis = ['üê∂', 'üê±', 'üê≠', 'üêπ', 'üê∞', 'ü¶ä', 'üêª', 'üêº', 'üê®', 'üêØ', 'ü¶Å', 'üêÆ'];

        // Variables del juego
        var cards = [];
        var flippedCards = [];
        var matchedPairs = 0;
        var moves = 0;
        var timer = 0;
        var timerInterval;
        var gameStarted = false;

        function initGame() {
            $('.game-board').empty();
            flippedCards = [];
            matchedPairs = 0;
            moves = 0;
            timer = 0;
            gameStarted = false;

            $('.moves span').text(moves);
            $('.time span').text(timer);

            if (timerInterval) {
                clearInterval(timerInterval);
            }

            var selectedEmojis = emojis.slice(0, 6);
            var gameCards = [];

            $.each(selectedEmojis, function (i, emoji) {
                gameCards.push(emoji);
                gameCards.push(emoji);
            });

            cards = shuffleArray(gameCards);

            $.each(cards, function (i, emoji) {
                var $card = $('<div></div>')
                    .addClass('card hidden')
                    .attr('data-index', i)
                    .attr('data-symbol', emoji)
                    .text(emoji);
                $('.game-board').append($card);
            });

            $('.card').off('click').on('click', handleCardClick);
            $('.restart-btn').off('click').on('click', initGame);
        }

        function shuffleArray(array) {
            var newArray = array.slice();
            for (var i = newArray.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var temp = newArray[i];
                newArray[i] = newArray[j];
                newArray[j] = temp;
            }
            return newArray;
        }

        function handleCardClick() {
            var $this = $(this);

            if ($this.hasClass('matched') || !$this.hasClass('hidden')) {
                return;
            }

            if (!gameStarted) {
                startTimer();
                gameStarted = true;
            }

            $this.removeClass('hidden');
            flippedCards.push($this);

            if (flippedCards.length === 2) {
                moves++;
                $('.moves span').text(moves);

                var $card1 = flippedCards[0];
                var $card2 = flippedCards[1];

                if ($card1.attr('data-symbol') === $card2.attr('data-symbol')) {
                    $card1.addClass('matched');
                    $card2.addClass('matched');
                    flippedCards = [];
                    matchedPairs++;

                    if (matchedPairs === 6) {
                        endGame();
                    }
                } else {
                    setTimeout(function () {
                        $card1.addClass('hidden');
                        $card2.addClass('hidden');
                        flippedCards = [];
                    }, 1000);
                }
            }
        }

        function startTimer() {
            timerInterval = setInterval(function () {
                timer++;
                $('.time span').text(timer);
            }, 1000);
        }

        function endGame() {
            clearInterval(timerInterval);
            setTimeout(function () {
                Swal.fire({
                    title: '¬°Felicidades!',
                    html: 'Completaste el juego en:<br><b>' + moves + '</b> movimientos<br><b>' + timer + '</b> segundos',
                    icon: 'success',
                    confirmButtonText: 'Jugar de nuevo',
                    background: '#0a192f',
                    color: '#ffffff',
                    confirmButtonColor: '#27ae60'
                }).then(function (result) {
                    if (result.isConfirmed) {
                        initGame();
                    }
                });
            }, 500);
        }

        initGame();
    });
</script>

</body>
</html>